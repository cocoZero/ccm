<html>
<head>
<title>html5页面js判断是否安装app，以及判断是否在app内部打开html5页面</title>
<script>
  // var timer, ifr;
  //   document.getElementById('openApp').onclick = function(e){
  //       // 通过iframe的方式试图打开APP，如果能正常打开，会直接切换到APP，并自动阻止a标签的默认行为
  //       ifr = document.createElement('iframe');
  //       ifr.src = 'gzcbmbank://gzcb.mobile.com?bizCode=T_C_1051.hsml&TransSeqNo=1&RegisterDate=2';  //APP定义的打开协议
  //       ifr.style.display = 'none';
  //       document.body.appendChild(ifr);

  //       //1秒内未打开APP，则跳转下载等。
  //       timer = window.setTimeout(function(){
  //           location.href = "http://下载链接/..."; 
  //       }, 3000);
  //   }
  
  // function detectVersion() {
  //         let isAndroid,isIOS,isIOS9,version,
  //             u = navigator.userAgent,
  //             ua = u.toLowerCase();

  //         if (u.indexOf('Android') > -1 || u.indexOf('Linux') > -1) {   //android终端或者uc浏览器
  //             //Android系统
  //             isAndroid = true
  //         }

  //         if(ua.indexOf("like mac os x") > 0){
  //             //ios
  //             var regStr_saf = /os [\d._]*/gi ;
  //             var verinfo = ua.match(regStr_saf) ;
  //             version = (verinfo+"").replace(/[^0-9|_.]/ig,"").replace(/_/ig,".");
  //         }
  //         var version_str = version+"";
  //         if(version_str != "undefined" && version_str.length >0){
  //             version = parseInt(version)
  //             isIOS = true
  //         }
  //         return isIOS
  //       }

  //       // 判断手机上是否安装了app，如果安装直接打开url，如果没安装，执行callback
  //       function openApp(url,callback) {
  //         window.location = url;
  //           let isIOS = detectVersion()
  //           if(isIOS){
  //               var timeout, t = 4000, hasApp = true;  
  //               var openScript = setTimeout(function () {  
  //                   if (!hasApp) {
  //                       callback && callback()
  //                   }
  //                   document.body.removeChild(ifr);  
  //               }, 5000)  
                
  //               var t1 = Date.now();  
  //               var ifr = document.createElement("iframe");  
  //               ifr.setAttribute('src', url);  
  //               ifr.setAttribute('style', 'display:none');  
  //               document.body.appendChild(ifr);  

  //               timeout = setTimeout(function () {  
  //                   var t2 = Date.now();  
  //                   if (t2 - t1 < t + 100) {  
  //                       hasApp = false;
  //                   }
  //               }, t);
  //           }

  //       }
        
        //跳h5
        function goConfirmAddr(){
            window.location.href = 'http://m.gaotu100.com'
        }
        function jump(){
            openApp("gzcbmbank://gzcb.mobile.com?bizCode=T_C_1051.hsml&TransSeqNo=1&RegisterDate=2",goConfirmAddr)
        }
      function jump1(){
        window.location.href = 'gzcbmbank://gzcb.mobile.com?bizCode=T_C_1051.hsml&TransSeqNo=1&RegisterDate=2';
      }
  function jump2(){
        window.location.href = 'gzcbmbank1://gzcb.mobile.com?bizCode=T_C_1051.hsml&TransSeqNo=1&RegisterDate=2';
    setTimeout(function(){
			window.location='https://www.baidu.com';//如果超时就跳转到app下载页
		},500);
      }
  
</script>
</head>
<body>
<button onclick="jump()">跳转设置限额页面</button>
  <a href="gzcbmbank://gzcb.mobile.com?bizCode=T_C_1051.hsml&TransSeqNo=1&RegisterDate=2" >jump 跳转</a>
  <a href="javascript:;" id="openApp" >打开客户端</a>
  <button onclick="jump1()" id="openApp1" >打开客户端1</button>
  <button onclick="jump2()" id="openApp1" >打开不存在的客户端2</button>

</body>
</html>

